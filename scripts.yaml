thermostat:
  alias: Set thermostat to requested level
  sequence:
  - service: climate.set_temperature
    data_template:
      entity_id: climate.home
      temperature: "{{ requested_level }}"

timed_coffee:
  alias: Set 2 hour coffee timer
  sequence:
  # Cancel old timer
  - service: script.turn_off
    data:
      entity_id: script.coffee_timer_off
  # Set new timer
  - service: script.turn_on
    data:
      entity_id: script.coffee_timer_off

coffee_timer_off:
  alias: Turn off coffee after 2 hours
  sequence:
  - delay: 02:00:00
  - service: switch.turn_off
    data:
      entity_id: switch.coffee_switch
